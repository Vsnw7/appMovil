<ion-header [translucent]="true">
  <ion-toolbar>
    
    <ion-buttons slot="start">
      <ion-menu-button aria-label="Abrir Menu" menu="first"></ion-menu-button>
    </ion-buttons>
   
    <ion-buttons slot="start">
      <ion-button (click)="abrirNotificaciones()">
        <ion-icon name="notifications-outline" style="font-size: 1.5rem;"></ion-icon>
        
        <ion-badge color="danger" *ngIf="countSinLeer > 0" 
                   style="position: absolute; top: 5px; right: 0; font-size: 0.6rem; border-radius: 50%;">
          {{ countSinLeer }}
        </ion-badge>
      </ion-button>
    </ion-buttons>

    <ion-title>Inicio</ion-title>

    <ion-buttons slot="end">
      <ion-button routerLink="/mi-cuenta">
        <ion-icon name="person-circle-outline" style="font-size: 1.8rem;"></ion-icon>
      </ion-button>
    </ion-buttons>

  </ion-toolbar>
</ion-header>

<ion-content class="inicio-page" fullscreen>
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Inicio</ion-title>
    </ion-toolbar>
  </ion-header>

  <div *ngIf="(hero$ | async) === null" style="text-align: center; margin-top: 50px;">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Cargando...</p>
  </div>

  <ng-container *ngIf="hero$ | async as heroes">
    <div *ngIf="heroes.length === 0" style="padding: 20px; text-align: center;">
      <p>No hay datos en la colección 'inicio-hero'</p>
    </div>

    <div class="hero-section" *ngFor="let hero of heroes">
      <img [src]="hero.imageUrl" alt="Hero" class="hero-bg" loading="lazy" />
      <div class="hero-overlay"></div>

      <div class="hero-content">
        <h1>{{ hero.title }}</h1>
        <p>{{ hero.subtitle }}</p>
        <ion-button routerLink="/nosotros" class="btn-jugar">
          <ion-icon name="play-circle-outline" slot="start"></ion-icon>
          {{ hero.buttonLabel }}
        </ion-button>
      </div>
    </div>

    <div class="texto">
      <h1>PERSONAJES</h1>
    </div>
  </ng-container>

  
<ng-container *ngIf="historia$ | async as historias">
    <div class="historia-container">

      <!-- CARDS DE PERSONAJES -->
      <div class="historia-card personaje-card" *ngFor="let historia of historias">

        <!-- Imagen del personaje -->
         <div class="personaje-img-wrapper" *ngIf="historia.imageUrl">
          <img [src]="historia.imageUrl" alt="{{ historia.nombre }}" loading="lazy" />

          <div class="stats-overlay" *ngIf="historia.stats">
            <div class="stat-item">
              <span class="stat-label">DAÑO</span>
              <span class="stat-value">{{ historia.stats.dano }}</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">VIDA</span>
              <span class="stat-value">{{ historia.stats.vida }}</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">ARMA</span>
              <span class="stat-value">{{ historia.stats.arma }}</span>
            </div>
          </div>
        </div>

        <!-- Información del personaje -->
         <div class="personaje-content">
          <h2 class="personaje-nombre">{{ historia.nombre }}</h2>
          <p class="personaje-descripcion">{{ historia.descripcion }}</p>
         </div>  
      </div>
    </div>
  </ng-container>

</ion-content>